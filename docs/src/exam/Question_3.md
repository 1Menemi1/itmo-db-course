# 3. Файловые хранилища. Недостатки. Упорядоченные и неупорядоченные файлы

## Файловые хранилища. Недостатки

Развитие ПО идёт по пути абстрагирования данных от их обработки. Появляется вопрос — **где хранить данные?**

## 1. В файле

- Проблема разделения доступа к данным и сохранения целостности

## 2. В нескольких файлах

- **Дедлок**. Образование бесконечной блокировки (для одного файла блокировка конечная)

  - Чтобы это избежать, в БД существуют транзакции

- **Дублирование данных**.

  - Один из путей избавления — нормализация данных

- **Зависимость от типа**.

  - Например, долгий переход от ext3 к ext4 (из-за максимального размера файла 2 Тб в ext3)

- **Формат файла**.

  - Различные (в т.ч. новые) разработчики должны соблюдать формат файла

## Упорядоченные и неупорядоченные файлы

1. **Неупорядоченный** — новый факт в конец файла.

    - Быстрая запись, медленное чтение

2. **Упорядоченный** — сортировка по атрибуту.

    - Не очень-то быстрое чтение и запись

<br>

# 4. Трехуровневая архитектура ANSI/SPARC

Стандарт **ANSI/SPARC** - подход построения архитектуры.
В ней выделяется три слоя архитектуры.

## Уровни архитектуры ANSI/SPARC

1. Внешний у-нь
2. Концептуальный у-нь
3. Внутренний у-нь

## Внешний у-нь

Представление БД с позиции конечного пользователя _(смотрит на человека)_.

1. Определяется обьем и форма представления данных для принятия решения.
2. _Это не про хранение данных_, это про то как принимать эффективные решения на основе данных.

## Концептуальный у-нь

Обобщающее представление БД (то как данные хранятся и какая между ними связь/_смотрит на железо_).

1. Решение о том, какие данные и как они должны хранится _(например, статус будет храниться в числах или в строках)_.
2. Какие ограничения на эти данные накладываются _(проверка регулярными выражениями)_.

## Внутренний у-нь

Физическое представление БД с точки зрения конкретного инструмента.

1. Распределение данных по дисковому пространству
2. Структуры хранения данных
3. Как реализуется безопастность хранения данных (шифрование)
4. Сжатие данных, оптимизация памяти

> Таблица == отношения (relations)

**ANSI/SPARC** подразумевает учет всех трех уровней при приоектировании

**ANSI/SPARC** -> Уровни моделей данных

<br>

# 5. Модель сущность-связь. Классификация сущностей, атрибутов и связей. Нотация Чена для представления модели сущность-связь

> ER(A) - _сущность-отношение-атрибуты_

**Сущность** - _множество экземпляров: реальных или абстрактных однотипных предметов предметной области_

**Сильная сущность** - _может существовать независимо от остальных_

**Слабая сущность** - _может существовать только вместе с другой (сильной)_

У **сущности** могут быть **атрибуты** (свойства сущности)

**Атрибуты**:

1. Простые - номер
2. Составные - адресс, населенный пункт и тд
